define("local_datacurso_ratings/feedback",["exports","core/ajax","core/notification"],(function(_exports,_ajax,_notification){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * TODO describe module feedback
   *
   * @module     local_datacurso_ratings/feedback
   * @copyright  2025 Industria Elearning <info@industriaelearning.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */
// @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
// @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=function(){const form=document.querySelector(".feedback-admin form"),list=document.querySelector(".feedback-list");if(!form||!list)return;form.addEventListener("submit",(e=>{e.preventDefault();const input=form.querySelector("input[name='feedbacktext']");var feedbacktext;input.value.trim()&&(feedbacktext=input.value.trim(),_ajax.default.call([{methodname:"local_datacurso_ratings_add_feedback",args:{feedbacktext:feedbacktext}}])[0]).then((resp=>{_notification.default.addNotification({message:resp.message,type:"success"});const li=document.createElement("li");li.className="feedback-item",li.innerHTML="\n                    ".concat(input.value,'\n                    <button class="btn-delete" data-id="').concat(resp.id,'">✖️</button>\n                '),list.prepend(li),input.value=""})).catch(_notification.default.exception)})),list.addEventListener("click",(e=>{if(e.target.classList.contains("btn-delete")){(function(id){return _ajax.default.call([{methodname:"local_datacurso_ratings_delete_feedback",args:{id:id}}])[0]})(e.target.dataset.id).then((resp=>{_notification.default.addNotification({message:resp.message,type:"success"}),e.target.closest("li").remove()})).catch(_notification.default.exception)}}))},_ajax=_interopRequireDefault(_ajax),_notification=_interopRequireDefault(_notification)}));

//# sourceMappingURL=feedback.min.js.map