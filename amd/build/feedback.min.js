define("local_datacurso_ratings/feedback",["exports","core/ajax","core/notification"],(function(_exports,_ajax,_notification){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Feedback module logic.
   *
   * @module     local_datacurso_ratings/feedback
   * @copyright  2025 Industria Elearning <info@industriaelearning.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=function(){const container=document.querySelector(".feedback-admin"),form=null==container?void 0:container.querySelector("form"),list=null==container?void 0:container.querySelector(".feedback-list"),type=null==container?void 0:container.dataset.type;if(!form||!list||!type)return;form.addEventListener("submit",(e=>{e.preventDefault();const input=form.querySelector("input[name='feedbacktext']");input.value.trim()&&function(feedbacktext,type){return _ajax.default.call([{methodname:"local_datacurso_ratings_add_feedback",args:{feedbacktext:feedbacktext,type:type}}])[0]}(input.value.trim(),type).then((resp=>{_notification.default.addNotification({message:resp.message,type:"success"});const li=document.createElement("li");li.className="feedback-item list-group-item d-flex justify-content-between align-items-center",li.innerHTML='\n                    <span class="feedback-text">'.concat(input.value,'</span>\n                    <button type="button" class="btn btn-outline-danger btn-sm btn-delete" data-id="').concat(resp.id,'">X</button>\n                '),list.prepend(li),input.value=""})).catch(_notification.default.exception)})),list.addEventListener("click",(e=>{if(e.target.classList.contains("btn-delete")){const id=e.target.dataset.id;_ajax.default.call([{methodname:"local_datacurso_ratings_delete_feedback",args:{id:id}}])[0].then((resp=>{_notification.default.addNotification({message:resp.message,type:"success"}),e.target.closest("li").remove()})).catch(_notification.default.exception)}}))},_ajax=_interopRequireDefault(_ajax),_notification=_interopRequireDefault(_notification)}));

//# sourceMappingURL=feedback.min.js.map