define("local_datacurso_ratings/feedback",["exports","core/ajax","core/notification","core/templates"],(function(_exports,_ajax,_notification,_templates){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Feedback module logic.
   *
   * @module     local_datacurso_ratings/feedback
   * @copyright  2025 Industria Elearning <info@industriaelearning.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=function(){const container=document.querySelector(".feedback-admin");if(!container)return;const form=container.querySelector("form"),list=container.querySelector(".feedback-list"),type=container.dataset?container.dataset.type:null;if(!form||!list||!type)return;form.addEventListener("submit",(e=>{e.preventDefault();const input=form.querySelector("input[name='feedbacktext']");input.value.trim()&&function(feedbacktext,type){return _ajax.default.call([{methodname:"local_datacurso_ratings_add_feedback",args:{feedbacktext:feedbacktext,type:type}}])[0]}(input.value.trim(),type).then((resp=>{_notification.default.addNotification({message:resp.message,type:"success"});const item={id:resp.id,feedbacktext:input.value};_templates.default.renderForPromise("local_datacurso_ratings/feedback_item",item).then((_ref=>{let{html:html,js:js}=_ref;_templates.default.runTemplateJS(js);const temp=document.createElement("div");temp.innerHTML=html.trim();const newItem=temp.firstChild;list.prepend(newItem)})).catch((err=>_notification.default.exception(err))),input.value=""})).catch((err=>_notification.default.exception(err)))})),list.addEventListener("click",(e=>{if(e.target.classList.contains("btn-delete")){const id=e.target.dataset.id;_ajax.default.call([{methodname:"local_datacurso_ratings_delete_feedback",args:{id:id}}])[0].then((resp=>{_notification.default.addNotification({message:resp.message,type:"success"}),e.target.closest("li").remove()})).catch((err=>_notification.default.exception(err)))}}))},_ajax=_interopRequireDefault(_ajax),_notification=_interopRequireDefault(_notification),_templates=_interopRequireDefault(_templates)}));

//# sourceMappingURL=feedback.min.js.map