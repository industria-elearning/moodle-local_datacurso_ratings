define("local_datacurso_ratings/get_ai_analysis_global",["exports","core/ajax","core/notification","core/str"],(function(_exports,_ajax,_notification,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Handles AI analysis for the global ratings report.
   *
   * @module     local_datacurso_ratings/get_ai_analysis_global
   * @copyright  2025 Industria Elearning
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=_exports.default=void 0,_ajax=_interopRequireDefault(_ajax),_notification=_interopRequireDefault(_notification);const init=()=>{document.addEventListener("click",(async e=>{if(!e.target.closest(".btn-generate-ai"))return;const button=e.target.closest(".btn-generate-ai"),resultContainer=document.querySelector(".ai-analysis-result-global"),generatingText=await(0,_str.get_string)("generatecommentaiprocess","local_datacurso_ratings"),analysisTitle=await(0,_str.get_string)("analysisresult","local_datacurso_ratings"),generateButton=await(0,_str.get_string)("generatecommentaiglobal","local_datacurso_ratings"),generateError=await(0,_str.get_string)("generatecommentaierror","local_datacurso_ratings");button.disabled=!0,button.innerHTML='<i class="fa fa-spinner fa-spin"></i> '.concat(generatingText),resultContainer.innerHTML="",_ajax.default.call([{methodname:"local_datacurso_ratings_get_ai_analysis_global",args:{}}])[0].done((response=>{response&&response.analysis?resultContainer.innerHTML='\n                    <div class="alert alert-info">\n                        <h6>'.concat(analysisTitle,"</h6>\n                        <p>").concat(response.analysis,"</p>\n                    </div>"):resultContainer.innerHTML='<div class="alert alert-warning">'.concat(generateError,"</div>")})).fail((e=>{resultContainer.innerHTML='\n                    <div class="alert alert-danger p-2 mb-2">\n                        <i class="fa fa-exclamation-triangle"></i> '.concat(e.message,"\n                    </div>")})).always((()=>{button.disabled=!1,button.innerHTML="".concat(generateButton," âœ¨")}))}))};_exports.init=init;var _default={init:init};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=get_ai_analysis_global.min.js.map